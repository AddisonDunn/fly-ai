{"ast":null,"code":"var _jsxFileName = \"/Users/addisondunn/projects/my-dashboard/src/components/SearchResults.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport qs from 'query-string';\nimport Grid from '@material-ui/core/Grid';\nimport Quote from \"./Quote\";\nimport { Container } from \"@material-ui/core\";\nimport \"./ResultsPage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SearchResults() {\n  _s();\n\n  let history = useHistory();\n  const [error, setError] = useState(null);\n  const [didSearchResultsLoad, setDidSearchResultsLoad] = useState(false);\n  const [quotes, setQuotes] = useState([]);\n  const [carriers, setCarriers] = useState([]);\n  const [places, setPlaces] = useState([]);\n  useEffect(() => {\n    const query = {\n      originID: history.location.state[0],\n      destinationID: history.location.state[1],\n      departureDate: history.location.state[2],\n      arrivalDate: history.location.state[3]\n    };\n    console.log(qs.stringify(query));\n    fetch(\"http://localhost:8080/search?\" + qs.stringify(query), {\n      method: \"GET\"\n    }).then(res => res.json()).then(result => {\n      setDidSearchResultsLoad(true);\n      setQuotes(result.Quotes);\n      setCarriers(result.Carriers);\n      setPlaces(result.Places);\n    }, // Note: it's important to handle errors here\n    // instead of a catch() block so that we don't swallow\n    // exceptions from actual bugs in components.\n    error => {\n      setDidSearchResultsLoad(true);\n      setError(error);\n    });\n  }, []);\n\n  function findCarriers(quoteCarrierIDs) {\n    let airlineString = \"\";\n    let nextCarrier = {};\n    quoteCarrierIDs.forEach(carrierID => {\n      if (airlineString) {\n        airlineString += \", \";\n      }\n\n      nextCarrier = carriers.find(carrier => carrier.CarrierId === carrierID);\n\n      if (nextCarrier) {\n        airlineString += nextCarrier.Name;\n      }\n    });\n    return airlineString;\n  }\n\n  function findAirport(id) {\n    let airportString = \"\";\n    var airport = places.find(airport => airport.PlaceId === id);\n\n    if (airport) {\n      airportString += airport.Name;\n      airportString += \" (\" + airport.IataCode + \")\";\n    }\n\n    return airportString;\n  }\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 16\n    }, this);\n  } else if (!didSearchResultsLoad) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 16\n    }, this);\n  } else if (quotes.length < 1) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\\"No Quotes found.\\\" \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 16\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [console.log(quotes), /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"sm\",\n        className: \"searchContainer\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"column\",\n          justify: \"center\",\n          spacing: 3,\n          children: quotes.map(elem => /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            style: {\n              flexGrow: 1\n            },\n            children: /*#__PURE__*/_jsxDEV(Quote, {\n              id: elem.QuoteId,\n              minPrice: elem.MinPrice,\n              isDirect: elem.Direct,\n              airline: findCarriers(elem.OutboundLeg.CarrierIds),\n              departureAirport: findAirport(elem.OutboundLeg.OriginId),\n              arrivalAirport: findAirport(elem.OutboundLeg.DestinationId)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this);\n  }\n}\n\n_s(SearchResults, \"+368dpPQuOTfSVskdj0xEQxl7pg=\", false, function () {\n  return [useHistory];\n});\n\n_c = SearchResults;\nexport default SearchResults;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchResults\");","map":{"version":3,"sources":["/Users/addisondunn/projects/my-dashboard/src/components/SearchResults.jsx"],"names":["useEffect","useState","useHistory","qs","Grid","Quote","Container","SearchResults","history","error","setError","didSearchResultsLoad","setDidSearchResultsLoad","quotes","setQuotes","carriers","setCarriers","places","setPlaces","query","originID","location","state","destinationID","departureDate","arrivalDate","console","log","stringify","fetch","method","then","res","json","result","Quotes","Carriers","Places","findCarriers","quoteCarrierIDs","airlineString","nextCarrier","forEach","carrierID","find","carrier","CarrierId","Name","findAirport","id","airportString","airport","PlaceId","IataCode","message","length","map","elem","flexGrow","QuoteId","MinPrice","Direct","OutboundLeg","CarrierIds","OriginId","DestinationId"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport qs from 'query-string';\nimport Grid from '@material-ui/core/Grid';\nimport Quote from \"./Quote\";\nimport { Container } from \"@material-ui/core\";\nimport \"./ResultsPage.css\";\n\n\nfunction SearchResults() {\n\n    let history = useHistory();\n\n    const [error, setError] = useState(null);\n    const [didSearchResultsLoad, setDidSearchResultsLoad] = useState(false);\n    const [quotes, setQuotes] = useState([]);\n    const [carriers, setCarriers] = useState([]);\n    const [places, setPlaces] = useState([]);\n\n    useEffect(() => {\n        const query = {originID: history.location.state[0],\n            destinationID: history.location.state[1],\n            departureDate: history.location.state[2],\n            arrivalDate: history.location.state[3]\n        }\n        console.log(qs.stringify(query))\n        fetch(\"http://localhost:8080/search?\" + qs.stringify(query), {\n            method: \"GET\"\n            })\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    setDidSearchResultsLoad(true);\n                    setQuotes(\n                        result.Quotes\n                    );\n                    setCarriers(result.Carriers);\n                    setPlaces(result.Places);\n                },\n                // Note: it's important to handle errors here\n                // instead of a catch() block so that we don't swallow\n                // exceptions from actual bugs in components.\n                (error) => {\n                    setDidSearchResultsLoad(true);\n                    setError(error);\n                }\n            )\n    }, [])\n\n    function findCarriers(quoteCarrierIDs) {\n        let airlineString = \"\";\n        let nextCarrier = {};\n        quoteCarrierIDs.forEach(carrierID => {\n            if(airlineString) {\n                airlineString += \", \"\n            }\n            nextCarrier = carriers.find(carrier => carrier.CarrierId === carrierID);\n            if(nextCarrier) {\n                airlineString += nextCarrier.Name;\n            }\n            \n        });\n        return airlineString;\n    }\n\n    function findAirport(id) {\n        let airportString = \"\";\n        var airport = places.find(airport => airport.PlaceId === id)\n        if(airport) {\n            airportString += airport.Name;\n            airportString += \" (\" + airport.IataCode + \")\";\n        }\n        return airportString;\n    }\n\n    if (error) {\n        return <div>Error: {error.message}</div>;\n      } else if (!didSearchResultsLoad) {\n        return <div>Loading...</div>;\n      } else if(quotes.length < 1) {\n        return <div>\"No Quotes found.\" </div>\n      }\n        else {\n        return (<div>\n\n            { console.log(quotes) }\n\n            <Container maxWidth=\"sm\" className=\"searchContainer\"> \n\n            <Grid container direction=\"column\" justify=\"center\" spacing={3}>\n            {/* <Grid item >\n            <Quote id={quotes[0].QuoteId} minPrice={quotes[0].MinPrice} isDirect={quotes[0].Direct} />\n            </Grid> */}\n            {quotes.map( (elem) =>\n                <Grid item style={{flexGrow: 1}}>\n                        <Quote id={elem.QuoteId} \n                        minPrice={elem.MinPrice} \n                        isDirect={elem.Direct} \n                        airline={findCarriers(elem.OutboundLeg.CarrierIds)}\n                        departureAirport={findAirport(elem.OutboundLeg.OriginId)}\n                        arrivalAirport={findAirport(elem.OutboundLeg.DestinationId)} />\n                </Grid>\n              )}\n            \n            </Grid>\n\n            </Container>\n            </div>\n        );\n      }\n\n\n}\n\nexport default SearchResults;"]},"metadata":{},"sourceType":"module"}